<script>
    // ===============================================================
    // 1. ESTADO GLOBAL DE LA APLICACIÃ“N (SINGLE SOURCE OF TRUTH)
    // ===============================================================
    /**
     * @description Objeto 'state' que actÃºa como la "Ãºnica fuente de verdad" para la aplicaciÃ³n.
     * Centralizar el estado en un solo lugar hace que el flujo de datos sea predecible
     * y mÃ¡s fÃ¡cil de depurar. Todos los componentes leen de este estado para renderizarse.
     */
    let state = {
        userProfile: { email: null, role: null },
        tickets: [],
        allTicketsForStats: [],
        allPlanillas: [],   //  RENOMBRADO: Antes allClients, ahora allPlanillas
        allCreators: [],
        allSuperiores: [], // ðŸ†• NUEVO: Array de superiores
        comments: {}, // Nuevo: Almacena comentarios por ticketId
        notifications: [], // Nuevo: Almacena notificaciones
        currentView: 'dashboard',
        isDarkMode: () => document.body.classList.contains('dark-mode'),
        isMyTicketsFilterActive: true, // NUEVO: Estado para el filtro de mis tickets
        pagination: {
            currentPage: 1,
            pageSize: 10,
            totalTickets: 0,
            totalPages: 0
        },
        filters: {
            searchQuery: '',
            status: '',
            tool: '',
            motivoEscalamiento: '', //  RENOMBRADO: Antes client, ahora motivoEscalamiento
            createdBy: '',
            equipo: '', // ðŸ†• NUEVO: Filtro por equipo
            startDate: '',
            endDate: '',
            priority: ''
        },
        quickManagePagination: {
            currentPage: 1,
            pageSize: 10,
            totalTickets: 0,
            totalPages: 0
        },
        quickManageFilters: {
            status: '',
            priority: ''
        },
        sort: {
            column: 'Timestamp',
            direction: 'desc'
        },
        motivosOperativos: [] //  NUEVO: Almacena los motivos operativos para el datalist
    };
</script>